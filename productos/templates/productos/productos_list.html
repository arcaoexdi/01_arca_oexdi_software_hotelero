{% extends 'base_generic.html' %}

{% block content %}
<div class="container py-16 px-6">
  <!-- Título -->
  <h1 class="text-center text-4xl font-extrabold text-gold drop-shadow mb-10">
    🛍 Lista de Productos
  </h1>

  <!-- Botón Crear Producto -->
  <div class="flex justify-end mb-10">
    <a href="{% url 'productos:producto_form' %}"
       class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition flex items-center gap-2">
      <i class="bi bi-plus-circle"></i> Crear Producto
    </a>
  </div>

  <!-- Grid de productos -->
  <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    {% for producto in productos %}
      <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg overflow-hidden hover:scale-[1.02] transition">
        
        <!-- Imagen -->
        <div class="w-full h-52 bg-dark flex items-center justify-center p-4">
          {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}"
                 class="object-contain max-h-full">
          {% else %}
            <img src="https://via.placeholder.com/200x200?text=No+Imagen" alt="{{ producto.nombre }}"
                 class="object-contain max-h-full opacity-70">
          {% endif %}
        </div>

        <!-- Información -->
        <div class="p-5 text-center">
          <h5 class="text-xl font-bold text-white mb-2">{{ producto.nombre }}</h5>
          <p class="text-gray-300 text-sm mb-3">{{ producto.descripcion|truncatewords:12 }}</p>
          <p class="text-lg font-semibold text-emerald-400">💲 {{ producto.precio|floatformat:2 }}</p>

          <!-- Acciones -->
          <div class="flex flex-col gap-2 mt-5">
            <a href="{% url 'productos:producto_detail' producto.pk %}"
               class="px-4 py-2 rounded-full border border-gold text-gold hover:bg-gold hover:text-white transition text-sm font-semibold">
              👁 Ver Detalles
            </a>
            <a href="{% url 'productos:producto_form' producto.pk %}"
               class="px-4 py-2 rounded-full border border-yellow-400 text-yellow-400 hover:bg-yellow-400 hover:text-dark transition text-sm font-semibold">
              ✏️ Editar
            </a>
            <a href="{% url 'productos:producto_confirm' producto.pk %}"
               class="px-4 py-2 rounded-full border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition text-sm font-semibold">
              🗑 Eliminar
            </a>
          </div>
        </div>
      </div>
    {% empty %}
      <!-- Mensaje vacío -->
      <div class="col-span-full text-center">
        <p class="text-gray-400 text-lg font-medium">
          No hay productos disponibles en este momento.
        </p>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
