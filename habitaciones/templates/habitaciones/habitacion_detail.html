{% extends 'base_generic.html' %}
{% load static %}
{% block content %}

<div class="py-10 px-6">
  <!-- Tarjeta de detalles -->
  <div class="bg-white/10 backdrop-blur-xl rounded-2xl shadow-2xl overflow-hidden border border-white/20 mb-12 transform hover:scale-[1.01] transition-all duration-300">
    
    <!-- Header -->
    <div class="bg-gradient-to-r from-indigo-600 to-purple-700 text-white text-center py-5 shadow-md">
      <h2 class="text-2xl md:text-3xl font-extrabold tracking-wide">
        🏨 Habitación #{{ habitacion.numero }}
      </h2>
    </div>

    <!-- Imagen -->
    <div class="p-6 flex flex-col items-center">
      {% if habitacion.imagen %}
      <img src="{{ habitacion.imagen.url }}"
           alt="Imagen de la habitación"
           class="w-full max-w-3xl rounded-xl shadow-lg object-cover h-72 group-hover:scale-105 transition duration-500">
      {% else %}
      <img src="{% static 'images/no-image.png' %}"
           alt="Sin imagen disponible"
           class="w-full max-w-3xl rounded-xl shadow-lg object-cover h-72 opacity-80">
      <p class="text-gray-400 text-sm italic mt-2">No hay imagen disponible</p>
      {% endif %}
    </div>

    <!-- Datos -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 p-6">
      <div class="bg-white/20 backdrop-blur-md rounded-xl p-5 text-center shadow hover:shadow-lg transition">
        <p class="text-sm font-semibold text-gray-200">Tipo</p>
        <p class="text-lg font-bold text-white">{{ habitacion.get_tipo_habitacion_display }}</p>
      </div>
      <div class="bg-white/20 backdrop-blur-md rounded-xl p-5 text-center shadow hover:shadow-lg transition">
        <p class="text-sm font-semibold text-gray-200">Estado</p>
        <p class="text-lg font-bold 
          {% if habitacion.estado_habitacion == 'disponible' %}text-green-400
          {% elif habitacion.estado_habitacion == 'ocupada' %}text-red-400
          {% else %}text-yellow-400{% endif %}">
          {{ habitacion.get_estado_habitacion_display }}
        </p>
      </div>
      <div class="bg-white/20 backdrop-blur-md rounded-xl p-5 text-center shadow hover:shadow-lg transition">
        <p class="text-sm font-semibold text-gray-200">Capacidad</p>
        <p class="text-lg font-bold text-white">{{ habitacion.capacidad }} personas</p>
      </div>
      <div class="bg-white/20 backdrop-blur-md rounded-xl p-5 text-center shadow hover:shadow-lg transition">
        <p class="text-sm font-semibold text-gray-200">Precio</p>
        <p class="text-lg font-bold text-gold">${{ habitacion.precio|floatformat:2 }}</p>
      </div>
    </div>
  </div>

  <!-- Tabla de huéspedes -->
  <div class="bg-white/10 backdrop-blur-xl rounded-2xl shadow-2xl overflow-hidden border border-white/20 transform hover:scale-[1.01] transition-all duration-300">
    <div class="bg-gradient-to-r from-gray-700 to-gray-900 text-white text-center py-4 shadow-md">
      <h3 class="text-lg font-bold tracking-wide">👥 Huéspedes en esta habitación</h3>
    </div>
    <div class="p-6">
      {% if huespedes %}
      <div class="overflow-x-auto">
        <table class="w-full text-sm text-left text-gray-300 border-collapse">
          <thead class="bg-white/20 text-gray-100 uppercase text-xs">
            <tr>
              <th class="px-4 py-3">Nombre</th>
              <th class="px-4 py-3">Apellido</th>
              <th class="px-4 py-3">Tipo Doc.</th>
              <th class="px-4 py-3">Número</th>
              <th class="px-4 py-3">Correo</th>
              <th class="px-4 py-3">Teléfono</th>
              <th class="px-4 py-3">Vehículo</th>
              <th class="px-4 py-3">Placas</th>
              <th class="px-4 py-3 text-center">Acciones</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-white/10">
            {% for huesped in huespedes %}
            <tr id="huesped-{{ huesped.id }}" class="hover:bg-white/10 transition">
              <td class="px-4 py-2">{{ huesped.nombre }}</td>
              <td class="px-4 py-2">{{ huesped.apellido }}</td>
              <td class="px-4 py-2">{{ huesped.tipo_documento }}</td>
              <td class="px-4 py-2">{{ huesped.numero_documento }}</td>
              <td class="px-4 py-2">{{ huesped.correo_electronico }}</td>
              <td class="px-4 py-2">{{ huesped.telefono }}</td>
              <td class="px-4 py-2">{{ huesped.vehiculo }}</td>
              <td class="px-4 py-2">{{ huesped.placas }}</td>
              <td class="px-4 py-2 text-center flex gap-2 justify-center">
                <button class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded-full text-xs font-semibold shadow transition edit-huesped"
                        data-id="{{ huesped.id }}">
                  ✏️
                </button>
                <button class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-full text-xs font-semibold shadow transition delete-huesped"
                        data-id="{{ huesped.id }}">
                  🗑
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p class="text-gray-400 text-center italic">No hay huéspedes en esta habitación actualmente.</p>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
